# 响应式布局

**移动优先策略**

实现响应式布局大致分 2 步：

1. 利用媒体查询`@media`适配水平方向上的布局
2. 纵向布局利用`rem`单位替换`px`单位，并且使`html`元素的`font-size`值自适应设备的布局宽度来适配，大致有 3 种方案
   1. 利用 js 脚本动态修改`documentElement`元素的`fontSize`，计算公式 `document.documentElement.clientWidth / 375 * 基准fontSize值`
   2. 将 html 元素的`font-size`属性的 px 单位转换为`vw`单位，转换公式`基准fontSize值/(375/100vw)` 推荐使用
   3. 利用第三方库配合打包工具，自动将源码的`px`单位转成`rem`单位 便捷，个人感觉可控性稍差

# 媒体查询

## 语法

```css
@media not|only mediatype and (mediafeature and|or|not mediafeature) {
  CSS-Code;
}

```

## 动态外联样式表

```html
<link
  rel="stylesheet"
  media="screen and (min-width: 900px)"
  href="widescreen.css"
/>
<link
  rel="stylesheet"
  media="screen and (max-width: 600px)"
  href="smallscreen.css"
/>
```

## orientation:landscape

浏览器窗口的宽度小于高度时，称为`Portrait`模式 **竖屏**
浏览器窗口的宽度大于高度时，称为`Landscape`模式 **横屏**

```css
/* 横屏 */
@media only screen and (orientation: landscape) {
  body {
    background-color: lightblue;
  }
}

/* 竖屏 */
@media only screen and (orientation: portrait) {
  body {
    background-color: lightblue;
  }
}
```

## mediatype

screen、print、speech

```css
@media screen {
  body {
    color: green;
  }
}

@media print {
  body {
    color: black;
  }
}
```

## Window.matchMedia()

```js
if (window.matchMedia('(max-width: 700px)').matches) {
  // Viewport is less or equal to 700 pixels wide
} else {
  // Viewport is greater than 700 pixels wide
}
```

```js
// Create a match function
// x  MediaQueryListEvent
function myFunction(x) {
  if (x.matches) {
    document.body.style.backgroundColor = 'yellow';
  } else {
    document.body.style.backgroundColor = 'pink';
  }
}

// // Create a MediaQueryList object
const mmObj = window.matchMedia('(max-width: 700px)');

// Call the match function at run time:
myFunction(mmObj);

// Add the match function as a listener for state changes:
mmObj.addListener(myFunction);
```

```js
function matchMediaQuery(mediafeature, cb) {
  const mm = window.matchMedia(mediafeature);
  cb(mm);
  mm.addListener(cb);
  return mm;
}
```
