# 跨浏览器页签数据通信

 broadCastChannel 是一个全局的单例对象，用于跨浏览器页签的数据通信。

## 创建

```js
const broadCastChannel = new BroadCastChannel();
```

## 方法

### addEventListener

```js
/**
 * 监听事件
 * @param {String} eventName 事件名称
 * @param {Function} callback 回调函数
 */
broadCastChannel.addEventListener(eventName, callback);
```

### removeEventListener

```js
/**
 * 移除事件 
 * @param {String} eventName 事件名称
 * @param {Function} callback 回调函数
 */ 
broadCastChannel.removeEventListener(eventName, callback);  
```

### postMessage

```js
/**
 * 发送消息
 * @param {String} eventName 事件名称
 * @param {Object} data 消息数据
 */
broadCastChannel.postMessage(eventName, data);  
```

### onmessage

```js
/**
 * 监听消息 
 * @param {Function} callback 回调函数
 */
broadCastChannel.onmessage(callback);
```

### close

```js
/**
 * 关闭
 */
broadCastChannel.close();
```

## 示例

### 监听消息

```js 
const broadCastChannel = new BroadCastChannel();
broadCastChannel.addEventListener('message', (data) => {
  console.log(data);
});
```

### 发送消息

```js
const broadCastChannel = new BroadCastChannel();  
broadCastChannel.postMessage('message', {
  name: 'message' 
});
```
### 监听消息并发送消息

```js
const broadCastChannel = new BroadCastChannel();
broadCastChannel.addEventListener('message', (data) => {
  console.log(data);
  broadCastChannel.postMessage('message', {
    name: 'message'
  });
});
```

### 移除监听

```js
const broadCastChannel = new BroadCastChannel();
broadCastChannel.addEventListener('message', (data) => {
  console.log(data);  
  broadCastChannel.removeEventListener('message', (data) => {
    console.log(data);
  });
});
```

### 关闭  

```js
const broadCastChannel = new BroadCastChannel();
broadCastChannel.addEventListener('message', (data) => {
  console.log(data);
  broadCastChannel.close();
});
``` 

